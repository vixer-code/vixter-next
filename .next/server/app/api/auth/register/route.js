"use strict";(()=>{var e={};e.id=2,e.ids=[2],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},66049:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>x,originalPathname:()=>Z,patchFetch:()=>_,requestAsyncStorage:()=>f,routeModule:()=>g,serverHooks:()=>v,staticGenerationAsyncStorage:()=>w,staticGenerationBailout:()=>P});var a={};t.r(a),t.d(a,{POST:()=>h});var s=t(95419),i=t(69108),o=t(99678),n=t(78070),u=t(6521),l=t.n(u),d=t(9108),p=t(25252),c=t(52178);let m=p.Ry({name:p.Z_().min(2,"Name must be at least 2 characters"),email:p.Z_().email("Invalid email address"),username:p.Z_().min(3,"Username must be at least 3 characters"),password:p.Z_().min(6,"Password must be at least 6 characters"),dateOfBirth:p.Z_().optional()});async function h(e){try{let r=await e.json(),{name:t,email:a,username:s,password:i,dateOfBirth:o}=m.parse(r);if(await d._.user.findFirst({where:{OR:[{email:a},{username:s}]}}))return n.Z.json({error:"User with this email or username already exists"},{status:400});let u=await l().hash(i,12),{password:p,...c}=await d._.user.create({data:{name:t,email:a,username:s,password:u,dateOfBirth:o?new Date(o):null,profile:{create:{bio:""}}},include:{profile:!0}});return n.Z.json({message:"User created successfully",user:c})}catch(e){if(e instanceof c.jm)return n.Z.json({error:"Validation error",details:e.errors},{status:400});return console.error("Registration error:",e),n.Z.json({error:"Internal server error"},{status:500})}}let g=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"D:\\Vixter\\vixter-next\\app\\api\\auth\\register\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:f,staticGenerationAsyncStorage:w,serverHooks:v,headerHooks:x,staticGenerationBailout:P}=g,Z="/api/auth/register/route";function _(){return(0,o.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:w})}},9108:(e,r,t)=>{t.d(r,{_:()=>s});let a=require("@prisma/client"),s=globalThis.prisma??new a.PrismaClient({log:[]})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[638,393,206,252],()=>t(66049));module.exports=a})();